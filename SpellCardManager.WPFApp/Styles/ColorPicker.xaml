<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ctrl="clr-namespace:SpellCardManager.WPFApp.Controls"
                    xmlns:cvt="clr-namespace:SpellCardManager.WPFApp.Converters"
                    xmlns:mwpf="http://schemas.modernwpf.com/2019">

    <cvt:HueDoubleToColorConverter x:Key="hueToColorConverter" />
    <cvt:ColorToHexConverter x:Key="colorToHexConverter" />
    <BooleanToVisibilityConverter x:Key="boolToVisConverter" />

    <Style x:Key="HueSliderThumbStyle" TargetType="Thumb">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Thumb">
                    <Rectangle Width="{TemplateBinding Width}"
                               Height="2"
                               Stroke="Black" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="HueSliderStyle" TargetType="Slider">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Slider">
                    <Grid>
                        <Grid.Background>
                            <LinearGradientBrush>
                                <GradientStop Offset="0" Color="#ff0000" />
                                <GradientStop Offset="0.1666667" Color="#ffff00" />
                                <GradientStop Offset="0.3333333" Color="#00ff00" />
                                <GradientStop Offset="0.5" Color="#00ffff" />
                                <GradientStop Offset="0.6666667" Color="#0000ff" />
                                <GradientStop Offset="0.8333333" Color="#ff00ff" />
                                <GradientStop Offset="1" Color="#ff0000" />
                            </LinearGradientBrush>
                        </Grid.Background>
                        <Track x:Name="PART_Track" Width="{TemplateBinding Width}">
                            <Track.Thumb>
                                <Thumb Width="{TemplateBinding Width}" Style="{StaticResource HueSliderThumbStyle}" />
                            </Track.Thumb>
                        </Track>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type ctrl:ColorPicker}">
        <Setter Property="MinWidth" Value="100" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ctrl:ColorPicker}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Border BorderBrush="{DynamicResource TextControlBorderBrush}"
                                BorderThickness="1"
                                SnapsToDevicePixels="True"
                                UseLayoutRounding="False">
                            <Grid Name="PART_SaturationValueArea" Height="{Binding RelativeSource={RelativeSource Self}, Path=ActualWidth}">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Rectangle Name="HorizGradient"
                                           Grid.RowSpan="2"
                                           Grid.ColumnSpan="2"
                                           Stretch="UniformToFill">
                                    <Rectangle.Fill>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Offset="0" Color="#ffffffff" />
                                            <GradientStop Offset="1" Color="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=SelectedHue, Converter={StaticResource hueToColorConverter}}" />
                                        </LinearGradientBrush>
                                    </Rectangle.Fill>
                                </Rectangle>
                                <Rectangle Name="VertGradient"
                                           Grid.RowSpan="2"
                                           Grid.ColumnSpan="2"
                                           Stretch="UniformToFill">
                                    <Rectangle.Fill>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Offset="0" Color="#00000000" />
                                            <GradientStop Offset="1" Color="#ff000000" />
                                        </LinearGradientBrush>
                                    </Rectangle.Fill>
                                </Rectangle>

                                <Thumb HorizontalAlignment="Right"
                                       VerticalAlignment="Bottom"
                                       IsHitTestVisible="False"
                                       Visibility="{TemplateBinding IsEnabled,
                                                                    Converter={StaticResource boolToVisConverter}}">
                                    <Thumb.Template>
                                        <ControlTemplate>
                                            <Ellipse Width="8"
                                                     Height="8"
                                                     Margin="-4,-4,-4,-4"
                                                     Fill="White"
                                                     Stroke="Black"
                                                     StrokeThickness="1" />
                                        </ControlTemplate>
                                    </Thumb.Template>
                                </Thumb>
                            </Grid>
                        </Border>

                        <ctrl:CustomSlider Grid.Column="1"
                                           Width="15"
                                           Margin="5,0,0,0"
                                           IsDirectionReversed="True"
                                           IsMoveToPointEnabled="True"
                                           Maximum="1"
                                           Minimum="0"
                                           Orientation="Vertical"
                                           SnapsToDevicePixels="True"
                                           Style="{StaticResource HueSliderStyle}"
                                           UseLayoutRounding="False"
                                           Value="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=SelectedHue}" />

                        <Grid Grid.Row="1"
                              Grid.ColumnSpan="2"
                              Margin="0,5,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="75" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <TextBox mwpf:TextBoxHelper.IsDeleteButtonVisible="False" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=SelectedColor, Converter={StaticResource colorToHexConverter}, UpdateSourceTrigger=PropertyChanged}" />
                            <Border Grid.Column="1"
                                    Margin="5,0,0,0"
                                    BorderBrush="{DynamicResource TextControlBorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="{DynamicResource ControlCornerRadius}">
                                <Border.Background>
                                    <SolidColorBrush Color="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=SelectedColor}" />
                                </Border.Background>
                            </Border>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>